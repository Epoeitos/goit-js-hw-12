{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '53391226-a2ec73fe425479568eec525bb';\n\nexport async function getImagesByQuery(query, page = 1) {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: page,\n    },\n  });\n  return response.data;\n}","'use strict';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nexport const loadBtn = document.querySelector('.js-load-btn');\n\nlet lightbox = null;\n\nexport function initLightbox() {\n  if (lightbox) return;\n\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    close: true,\n    docClose: false,\n  });\n}\n\nexport function updateLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n\nfunction imgTemplate(img) {\n  return `<li class='gallery-item'>\n    <a class='gallery-link' href=${img.largeImageURL}>\n    <img loading='lazy' class='gallery-image' src='${img.webformatURL}' alt='${img.tags}'/>\n    <div class='img'>\n    <p><strong>Likes</strong> ${img.likes}</p>\n    <p><strong>Views</strong> ${img.views}</p>\n    <p><strong>Comments</strong> ${img.comments}</p>\n    <p><strong>Downloads</strong> ${img.downloads}</p></div></a></li>`;\n}\n\nexport function createGallery(images) {\n  const markup = images.map(imgTemplate).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  updateLightbox();\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  const loaderOverlay = document.getElementById('loader-overlay');\n  if (loaderOverlay) {\n    loaderOverlay?.classList.remove('hidden');\n  }\n}\n\nexport function hideLoader() {\n  const loaderOverlay = document.getElementById('loader-overlay');\n  if (loaderOverlay) {\n    loaderOverlay?.classList.add('hidden');\n  }\n}\n\nexport function showLoadMoreButton() {\n  if (loadBtn) {\n    loadBtn?.classList.remove('hidden');\n  }\n}\n\nexport function hideLoadMoreButton() {\n  if (loadBtn) {\n    loadBtn?.classList.add('hidden');\n  }\n}","'use strict';\n\nimport { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  loadBtn,\n  createGallery,\n  clearGallery,\n  hideLoader,\n  showLoader,\n  hideLoadMoreButton,\n  showLoadMoreButton,\n  initLightbox,\n} from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\n\nconst PAGE_SIZE = 15;\nlet query = '';\nlet currentPage = 1;\nlet totalPages = 0;\n\nhideLoadMoreButton();\nhideLoader();\ninitLightbox();\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const formData = new FormData(e.target);\n  query = formData.get('search-text').trim();\n  currentPage = 1;\n\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term!',\n    });\n    return;\n  }\n\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  await fetchImg();\n});\n\nloadBtn.addEventListener('click', async () => {\n  currentPage += 1;\n\n  hideLoadMoreButton();\n  showLoader();\n\n  await fetchImg();\n});\n\nasync function fetchImg() {\n  try {\n    const res = await getImagesByQuery(query, currentPage);\n\n    if (res.hits.length === 0 && currentPage === 1) {\n      iziToast.error({\n        title: 'No results',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      hideLoader();\n      return;\n    }\n\n    totalPages = Math.ceil(res.total / PAGE_SIZE);\n\n    createGallery(res.hits);\n    checkBtnStatus();\n\n    if (currentPage > 1) {\n      scrollPage();\n    }\n  } catch (error) {\n    {\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong. Please try again later.',\n      });\n\n      console.error(error);\n    }\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction checkBtnStatus() {\n  if (currentPage < totalPages) {\n    showLoadMoreButton();\n  } else {\n    hideLoadMoreButton();\n    iziToast.info({\n      title: 'The End',\n      message: 'We`re sorry, but you`ve reached the end of search results.',\n    });\n  }\n}\n\nfunction scrollPage() {\n  const firstCard = document.querySelector('.gallery-item');\n  if (!firstCard) return;\n\n  const { height: cardHeight } = firstCard.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","axios","gallery","loadBtn","lightbox","initLightbox","SimpleLightbox","updateLightbox","imgTemplate","img","createGallery","images","markup","clearGallery","showLoader","loaderOverlay","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","PAGE_SIZE","currentPage","totalPages","iziToast","fetchImg","res","checkBtnStatus","scrollPage","error","firstCard","cardHeight"],"mappings":"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"}